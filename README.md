# PINK MILK: Модель производства молочной продукции

Этот проект реализует программную систему для моделирования производства и распределения молочных продуктов. Программа разработана в соответствии с заданием:

## Задание: 33 Вариант
**Модель производства молочной продукции**  
**Предметная область** — производство и распределение молочных продуктов.

### Важные сущности:
- Производственный цех;
- Коровы;
- Молоко;
- Технологический процесс;
- Упаковка;
- Склад;
- Потребитель.

### Операции:
- Операция дойки коров;
- Операция обработки и хранения молока;
- Операция производства молочной продукции;
- Операция упаковки и маркировки;
- Операция распределения продукции.

---

## Возможности системы
- Управление коровами (учет коров, доение, подсчет объема молока);
- Производство продуктов (упаковка молока, сыров, сметаны и другой продукции);
- Хранение продукции на складе;
- Управление потребителями (регистрация потребителей, распределение продукции);
- Логирование всех операций для отслеживания работы системы;
- Сохранение состояния системы между запусками программы.

---

## Структура проекта и описание компонентов

### 1. Основной запуск приложения

**Класс `App`**  
Основная точка входа в приложение. Этот класс создает экземпляры сервиса `FarmService` и пользовательского интерфейса `FarmCLI`. Далее передает управление в метод `run()` интерфейса командной строки.  

```java
public static void main(String[] args) {
    FarmService farmService = new FarmService();
    FarmCLI cli = new FarmCLI(farmService);
    cli.run();
}
```

---

### 2. Сущности

#### Класс `Cow` (Корова)
Модель коровы с полями:
- `id` — уникальный идентификатор коровы;
- `milkPerDay` — объем молока, производимого за день.

Данный класс предоставляет методы доступа (`getId`, `getMilkPerDay`) и определяет строковое представление коровы.  

```java
public class Cow {
    private int id;
    private double milkPerDay;

    public Cow(int id, double milkPerDay) { /*...*/ }
    public int getId() { /*...*/ }
    public double getMilkPerDay() { /*...*/ }
}
```

#### Класс `Milk` (Молоко)
Объект для хранения данных об объеме молока. Реализует интерфейс `Serializable`.

**Поля:**
- `volume` — объем молока.

Методы: `getVolume`, конструктор для инициализации.

#### Класс `Product` (Продукт)
Представляет произведенную продукцию. Реализует интерфейс `Serializable`.

**Поля:**
- `name` — название продукта (например, "сыр");
- `volume` — объем;
- `shelfLife` — срок годности.

**Методы:**
- `Product(String name, double volume, int shelfLife)` — конструктор, валидирующий объем и срок годности;
- `getName`, `getVolume`, `getShelfLife` — для получения характеристик продукта.

---

### 3. Работа с хранилищем

#### Класс `Warehouse` (Склад)

**Назначение:** управление продукцией на складе.

**Поля:**
- `storedProducts` — список всех продуктов, находящихся на складе.

**Методы:**
- `addProduct(Product product)` — добавляет продукт на склад. Генерирует исключение, если продукт `null`.
- `getStoredProducts()` — возвращает список всех продуктов.
- `removeProductByName(String productName)` — удаляет продукт с указанным названием.  
  В случае, если продукт не найден, выбрасывает исключение `IllegalArgumentException`.

---

### 4. Сервис

#### Класс `FarmService`
Основной сервис для управления фермой.

**Ключевые компоненты:**
- `List<Cow>` — список коров;
- `Warehouse warehouse` — объект склада;
- `List<Consumer>` — список потребителей;
- Методы сериализации, такие как `saveState()` и `loadState()`.

**Основные методы:**
- `addCow(Cow cow)` — добавление новой коровы;
- `milkCow(Cow cow)` — доение одной коровы, возвращает объект `Milk`;
- `milkAllCows()` — доение всех коров, возвращает общий объем молока;
- `addMilkToWarehouse(Milk milk)` — добавляет молоко на склад;
- `addConsumer(Consumer consumer)` — добавляет потребителя;
- `distributeProduct(Product product, Consumer consumer)` — распределяет продукт между потребителями.

---

### 5. Производственный процесс

#### Класс `ProductionUnit`
Реализует процессы переработки молока в конечные продукты (молоко, сыр, сметану и т.д.).

**Методы:**
- `processMilk(Milk milk, String productName, int shelfLife)`  
  Производит продукт из молока. Если на складе недостаточно молока, выбрасывается исключение `NotEnoughMilkException`.

---

### 6. Логирование

#### Класс `CustomLogger`
Логирует действия системы. Логи сохраняются в файл, указанный в конфигурации.

**Основные методы:**
- `info(String message)` — логирует информационное сообщение;
- `warning(String message)` — логирует предупреждение;
- `log(String level, String message, Throwable throwable, String logFile)` — универсальный метод логирования.

---

### 7. Управление через CLI

#### Класс `FarmCLI`
Интерфейс командной строки для взаимодействия с системой. Использует сервис `FarmService`.

**Основные команды:**
1. Добавить корову.
2. Подоить корову или всех коров.
3. Посмотреть текущий список коров.
4. Управлять складом (добавить/удалить продукт, посмотреть содержимое).
5. Добавить потребителя и распределить продукцию.

---

### 8. Исключения

#### Класс `NotEnoughMilkException`
Специальное исключение для ошибок, связанных с недостатком молока. Используется в методе `processMilk` в `ProductionUnit`.

---

## Функциональные особенности
- **Обработка исключений:** некорректные операции, такие как удаление несуществующего продукта или нехватка молока, обрабатываются через механизм исключений.
- **CLI:** полностью интерактивный интерфейс командной строки.
- **Сохранение состояния:** данные о коровах, складе и потребителях сохраняются между запусками благодаря сериализации.

---

## Структура программы

```plaintext
src/
│
├── by.rublevskaya.pinkmilk/
│   ├── cli/
│   │   └── FarmCLI.java          - интерфейс командной строки
│   │
│   ├── client/
│   │   └── Consumer.java         - модель потребителя
│   │
│   ├── exception/
│   │   └── NotEnoughMilkException.java  - исключение
│   │
│   ├── log/
│   │   └── CustomLogger.java      - логирование
│   │
│   ├── model/
│   │   ├── Cow.java              - модель коровы
│   │   └── Milk.java             - модель молока
│   │
│   ├── production/
│   │   ├── ProductionUnit.java   - производственный процесс
│   │   └── Product.java          - модель продукта
│   │
│   ├── service/
│   │   ├── FarmService.java      - основной сервис
│   │   └── PropsHandler.java     - работа с конфигурацией
│   │
│   ├── storage/
│   │   └── Warehouse.java        - склад
│   │
│   └── App.java                  - точка входа
│
└── resources/
    └── config.properties         - конфигурация системы
```

---

## Установка и запуск программы

1. Склонируйте репозиторий:
   ```bash
   git clone https://github.com/ваша-ссылка
   cd PINK_MILK
   ```
2. Скомпилируйте проект:
   ```bash
   mvn compile
   ```
3. Запустите приложение:
   ```bash
   mvn exec:java -Dexec.mainClass=by.rublevskaya.pinkmilk.App
   ```

---

## Тестирование
Проект снабжен юнит-тестами (используется `JUnit`). Тесты покрывают функционал всех ключевых компонентов (например, методы склада, обработки молока).

Для запуска тестов:
```bash
mvn test
```

---

Проект представляет собой модель фермы для производства молочной продукции с учетом хранения, распределения и обработки данных.
